{% extends "web/base.html" %}
{% load staticfiles %}
{% load humanize %}

{% block title %}Crowdfunded Hosting{% endblock %}
{% block body_class %}home{% endblock %}

{% block content %}
<header>
  <img class="logo" src="{% static "img/logo.png" %}">
  <h1 class="heading">Dānabox</h1>
  <span class="strapline">Crowdfunded Hosting</span>
</header>

<em class="beta_text">Currently in private beta.</em>

<p>
	Dānabox is a Heroku-inspired hosting platform. The difference being that each app is funded
	by donations in the style of Wikipedia. Because of its donation-based funding model only public
	Github repositories can be hosted on it.
</p>

<p>Dānabox is built on <a href="http://deis.io">Deis</a>.</p>

<h2>Getting Started</h2>

<ol>
	<li>
		Install the Dānabox client using <a href="http://www.pip-installer.org/en/latest/installing.html">pip</a>:
		<pre>$ pip install danabox</pre>
	</li>

	<li>
		Login using your Github credentials:
		<pre>$ danabox login</pre>
	</li>

	<li>
		Go to the local version of your Github repository:
		<pre>
$ cd <my-application-repo>
$ danabox create
Creating application... done, created opdemand-example--ruby--sinatra
		</pre>
	</li>

	<li>
		Use `danabox deploy` to deploy your application:
		<pre>
$ danabox deploy
From https://github.com/opdemand/example-ruby-sinatra
* branch            master     -> FETCH_HEAD
Already up-to-date.
     Ruby app detected
-----> Compiling Ruby/Rack
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.2
     Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
     Using rack (1.5.2)
     Using rack-protection (1.5.0)
     Using tilt (1.3.6)
     Using sinatra (1.4.2)
     Using bundler (1.3.2)
     Your bundle is complete! It was installed into ./vendor/bundle
     Bundle completed (0.34s)
     Cleaning up the bundler cache.
-----> Discovering process types
     Procfile declares types -> web
     Default process types for Ruby -> rake, console, web

-----> Compiled slug size: 11.5 MB
     Launching... done, v4

-----> opdemand-example--ruby--sinatra deployed to Dānabox
     http://opdemand-example--ruby--sinatra.danabox.es

-----> Donation page available at:
     http://danabox.io/app/opdemand-example--ruby--sinatra

     To learn more, use `deis help` or visit http://danabox.io

$ curl -s http://opdemand-example--ruby--sinatra.danabox.es
Powered by Deis!
		</pre>
	</li>
</ol>

<strong>Dānabox credit pool total: {{ formation.danabox_credits }}</strong>

<h2>All applications currently installed on Dānabox</h2>
<ul>
  {% for app in apps %}
	<li>
      <a href="{% url 'web.views.app' app.id %}">
        {{ app.id }}
      </a>
  </li>
  {% endfor %}
</ul>
{% endblock %}
